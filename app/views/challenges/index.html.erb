

<div data-controller="carousel">
  <div class="categories-carousel <%= params[:category].blank? ? 'active' : '' %>">

    <div class="category-container">
      <%= link_to "All", challenges_path, class: "category-filter-button" %>
      <% @categories.each do |category| %>
        <%= link_to category.name, challenges_path(category: category.id), class: "category-filter-button" %>
      <% end %>
    </div>

  </div>


  <div class="category-container">
    <div>
      <%= @category_name %>
      <%= @category_description %>
    </div>
  </div>

  <h1>Challenges</h1>


  <div class="challenges-container">
    <% if params[:category].present? %>
      <% challenges = Challenge.where(category_id: params[:category]) %>
      <% challenges.each do |challenge| %>
        <div class="challenge-card">
          <div class="challenge-image">
            <img src="https://images.unsplash.com/photo-1502101872923-d48509bff386?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80" alt="Challenge-Image">
          </div>
          <div class="challenge-details">
              <h2 class="challenge-title"><%= challenge.name %></h2>
              <p class="carbon-footprint">Carbon Footprint: <%= challenge.saving_carbonamount %> kg CO2e</p>
          </div>
        </div>
      <% end %>
    <% else %>
      <% @challenges.each do |challenge| %>
        <div class="challenge-card">
          <div class="challenge-image">
            <img src="https://images.unsplash.com/photo-1502101872923-d48509bff386?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80" alt="Challenge-Image">
           </div>
            <div class="challenge-details">
              <h2 class="challenge-title"><%= challenge.name %></h2>
              <p class="carbon-footprint">Carbon Footprint: <%= challenge.saving_carbonamount %> kg CO2e</p>
            </div>
          </div>
      <% end %>
    <% end %>
  </div>

</div>
